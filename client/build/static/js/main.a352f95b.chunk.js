(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{35:function(t,e,n){t.exports=n(63)},40:function(t,e,n){},63:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n.n(a),r=n(15),u=n.n(r),o=(n(40),n(5)),i=n(18),l=n(11),d=n(34),s=Object(l.c)({products:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"PRODUCTS_RECEIVED":return t.concat(e.payload);case"PRODUCT_DELETED":return t.filter((function(t){return t._id!==e.payload}));case"PRODUCT_ADDED":return t.concat(e.payload);case"PRODUCT_UPDATED":return t.map((function(t){return t._id===e.payload._id?Object.assign({},e.payload):t}));case"ADDED_TO_CART":return t.map((function(t){if(t._id===e.item.productId){var n=0===t.quantity?0:t.quantity-1;return Object.assign({},t,{quantity:n})}return t}));default:return t}},cart:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADDED_TO_CART":for(var n=t.some((function(t){return t._id===e.item._id}));e.item.quantity>0;)return n?t.map((function(t){return t._id===e.item._id?Object.assign({},t,{quantity:t.quantity+1}):t})):t.concat(Object.assign({},e.item,{quantity:1}));return t;case"CART_ITEMS_RECEIVED":return e.payload;case"CHECKOUT":return[];default:return t}},loading:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_TO_CART_REQUEST":return!0;case"ADDED_TO_CART":return!1;default:return t}}}),m=Object(l.d)(s,Object(l.a)(d.a)),p=n(2),E=function(t){return c.a.createElement("tr",null,c.a.createElement("td",null,t.title),c.a.createElement("td",null,t.quantity),c.a.createElement("td",null,"$",t.price))},f=n(20),h=n(10),b=n.n(h),y={getProducts:function(t){return b.a.get("/api/products").then((function(t){return t.data})).then(t).catch((function(t){return console.log(t)}))},addProduct:function(t,e){return b.a.post("/api/products",Object(f.a)({},t)).then((function(t){return t.data})).then(e).catch((function(t){return console.log(t)}))},deleteProduct:function(t,e){return b.a.delete(function(t){return"/api/products/".concat(t)}(t)).then((function(t){return t.data})).then(e).catch((function(t){return console.log(t)}))},updateProduct:function(t,e,n){return b.a.put(function(t){return"/api/products/".concat(t)}(t),Object(f.a)({},e)).then((function(t){return t.data})).then(n).catch((function(t){return console.log(t)}))},getCartItems:function(t){return b.a.get("/api/cart").then((function(t){return t.data})).then(t).catch((function(t){return console.log(t)}))},addToCart:function(t,e){return b.a.post("/api/cart",{productId:t.id,title:t.title,price:t.price}).then((function(t){return t.data})).then(e).catch((function(t){return console.log(t)}))},checkout:function(t){return b.a.post("/api/cart/checkout").then((function(t){return t.data})).then(t).catch((function(t){return console.log(t)}))}};var v=function(){var t=Object(o.b)(),e=Object(o.c)((function(t){return t.cart}));Object(a.useEffect)((function(){var e;t((function(t){y.getCartItems((function(e){t(function(t){return{type:"CART_ITEMS_RECEIVED",payload:t}}(e))})),e&&e()}))}),[]);var n=Object(a.useCallback)((function(){var e;t((function(t){y.checkout((function(){t({type:"CHECKOUT"})})),e&&e()}))}),[t]),r=e.map((function(t){return c.a.createElement(E,Object.assign({key:t._id},t))})),u=Math.round(100*e.reduce((function(t,e){return t+e.price*e.quantity}),0))/100;return c.a.createElement("header",null,c.a.createElement("h1",null,"The Shop!"),0===e.length?c.a.createElement("div",{className:"cart"},c.a.createElement("h2",null,"Your Cart"),c.a.createElement("p",null,"Your cart is empty"),c.a.createElement("p",null,"Total: $0"),c.a.createElement("a",{className:"button checkout disabled"},"Checkout")):c.a.createElement("div",{className:"cart"},c.a.createElement("h2",null,"Your Cart"),c.a.createElement("table",{className:"cart-items"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Item"),c.a.createElement("th",null,"Quantity"),c.a.createElement("th",null,"Price"))),c.a.createElement("tbody",null,r,c.a.createElement("tr",null,c.a.createElement("td",{colSpan:"3",className:"total"},"Total: $",u.toFixed(2))))),c.a.createElement("a",{className:"button checkout",onClick:n},"Checkout")))},g=n(9),C=n(14),O=function(t){var e;return c.a.createElement("form",null,c.a.createElement("div",{className:"input-group"},c.a.createElement("label",{htmlFor:"product-name"},"Product Name"),c.a.createElement("input",{type:"text",id:"product-name",name:"title",value:t.title,onChange:t.onInputChange})),c.a.createElement("div",{className:"input-group"},c.a.createElement("label",{htmlFor:"product-price"},"Price"),c.a.createElement("input",{type:"text",id:"product-price",name:"price",value:t.price,onChange:t.onInputChange})),c.a.createElement("div",{className:"input-group"},c.a.createElement("label",{htmlFor:"product-quantity"},"Quantity"),c.a.createElement("input",(e={type:"text",id:"product-quantity",value:"2",name:"quantity"},Object(C.a)(e,"value",t.quantity),Object(C.a)(e,"onChange",t.onInputChange),e))),c.a.createElement("div",{className:"actions form-actions"},c.a.createElement("a",{className:"button",onClick:t.onSubmit},t.submitText),"Add"!==t.submitText?c.a.createElement("a",{className:"button",onClick:t.onCancelClick},"Cancel"):""))},D=function(t){var e=Object(a.useState)(t.product.title||""),n=Object(g.a)(e,2),r=n[0],u=n[1],o=Object(a.useState)(t.product.price||0),i=Object(g.a)(o,2),l=i[0],d=i[1],s=Object(a.useState)(t.product.quantity||0),m=Object(g.a)(s,2),p=m[0],E=m[1];return c.a.createElement("div",{className:"edit-form"},c.a.createElement("h3",null,"Edit Product"),c.a.createElement(O,{title:r,price:l,quantity:p,onInputChange:function(t){var e=t.target.name,n=t.target.value;switch(e){case"title":u(n);break;case"price":d(n);break;case"quantity":E(n)}},onSubmit:function(e){e.preventDefault();var n={title:r,price:l,quantity:p};t.onUpdateProduct(n,t.product._id,t.onToggleEdit)},submitText:"Update",onCancelClick:function(){u(t.product.title),d(t.product.price),E(t.product.quantity),t.onToggleEdit()}}))},T=function(t){var e=Object(a.useState)(!1),n=Object(g.a)(e,2),r=n[0],u=n[1],i=t.product,l=0===i.quantity,d=Object(o.c)((function(t){return t.loading})),s=Object(o.b)(),m=function(t){var e,n;s((e=t,function(t){y.deleteProduct(e,(function(){t(function(t){return{type:"PRODUCT_DELETED",payload:t}}(e))})),n&&n()}))},p=function(t){var e,n,a;0===t.quantity||d||s((e={quantity:t.quantity-1},n=t._id,function(t){t({type:"ADD_TO_CART_REQUEST"}),y.updateProduct(n,e,(function(e){y.addToCart(e,(function(e){t(function(t){return{type:"ADDED_TO_CART",item:t}}(e))}))})),a&&a()}))},E=function(){u(!r)};return c.a.createElement("div",{className:"product"},c.a.createElement("div",{className:"product-details"},c.a.createElement("h3",null,i.title),c.a.createElement("p",{className:"price"},"$",i.price),c.a.createElement("p",{className:l?"quantity none-left":"quantity"},i.quantity," left in stock"),r?c.a.createElement(D,{product:i,onToggleEdit:E,onUpdateProduct:function(t,e,n){s(function(t,e,n){return function(a){y.updateProduct(e,t,(function(t){a(function(t){return{type:"PRODUCT_UPDATED",payload:t}}(t))})),n&&n()}}(t,e,n))},editable:r}):c.a.createElement("div",{className:"actions product-actions"},c.a.createElement("a",{className:l?"button add-to-cart disabled":"button add-to-cart",onClick:function(){return p(i)}},"Add to Cart"),c.a.createElement("a",{className:"button edit",onClick:E},"Edit")),c.a.createElement("a",{className:"delete-button",onClick:function(){return m(i._id)}},c.a.createElement("span",null,"X"))))},_=function(){var t=Object(o.b)(),e=Object(o.c)((function(t){return t.products}));Object(a.useEffect)((function(){var e;t((function(t){y.getProducts((function(e){t(function(t){return{type:"PRODUCTS_RECEIVED",payload:t}}(e))})),e&&e()}))}),[t]);var n=e.map((function(t){return c.a.createElement(T,{key:t._id,product:t})}));return c.a.createElement("div",{className:"product-listing"},c.a.createElement("h2",null,"Products"),n)},j=function(t){var e=Object(a.useState)(""),n=Object(g.a)(e,2),r=n[0],u=n[1],i=Object(a.useState)(""),l=Object(g.a)(i,2),d=l[0],s=l[1],m=Object(a.useState)(""),p=Object(g.a)(m,2),E=p[0],f=p[1],h=Object(a.useState)(!1),b=Object(g.a)(h,2),v=b[0],C=b[1],D=Object(o.b)(),T=function(){C(!v)},_=function(){u(""),s(""),f(""),C(!1)},j=v?"add-form visible":"add-form";return c.a.createElement("div",{className:j},c.a.createElement("p",null,c.a.createElement("a",{className:"button add-product-button",onClick:T},"Add A Product")),c.a.createElement("h3",null,"Add Product"),c.a.createElement(O,{title:r,price:d,quantity:E,submitText:"Add",onSubmit:function(t){var e,n;t.preventDefault(),D((e={title:r,price:d,quantity:E},n=function(){T(),_()},function(t){y.addProduct(e,(function(e){t(function(t){return{type:"PRODUCT_ADDED",payload:t}}(e))})),n&&n()}))},onInputChange:function(t){var e=t.target.name,n=t.target.value;switch(e){case"title":u(n);break;case"price":s(n);break;case"quantity":f(n)}}}))},k=function(){return c.a.createElement("div",{id:"app"},c.a.createElement(v,null),c.a.createElement("main",null,c.a.createElement(_,null),c.a.createElement(j,null)))},q=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(p.a,{path:"/",exact:!0,component:k}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(o.a,{store:m},c.a.createElement(i.a,null,c.a.createElement(q,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.a352f95b.chunk.js.map