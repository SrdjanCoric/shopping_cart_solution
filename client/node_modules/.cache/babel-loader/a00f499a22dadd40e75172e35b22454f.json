{"ast":null,"code":"import _slicedToArray from\"/home/srdjan/Desktop/2105/shopping_cart_solution/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{updateProductAction,deleteProductAction,addToCartAction}from\"../actions/productActions\";import EditProductForm from\"./EditProductForm\";var EditableProduct=function EditableProduct(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),editable=_useState2[0],setEditable=_useState2[1];var product=props.product;var isZeroQuantity=product.quantity===0;var loading=useSelector(function(state){return state.loading;});var dispatch=useDispatch();var deleteProduct=function deleteProduct(id){dispatch(deleteProductAction(id));};var updateProduct=function updateProduct(product,id,callback){dispatch(updateProductAction(product,id,callback));};var handleAddToCart=function handleAddToCart(product){if(product.quantity===0||loading)return;dispatch(addToCartAction({quantity:product.quantity-1},product._id));};var handleToggleEdit=function handleToggleEdit(){setEditable(!editable);};return/*#__PURE__*/React.createElement(\"div\",{className:\"product\"},/*#__PURE__*/React.createElement(\"div\",{className:\"product-details\"},/*#__PURE__*/React.createElement(\"h3\",null,product.title),/*#__PURE__*/React.createElement(\"p\",{className:\"price\"},\"$\",product.price),/*#__PURE__*/React.createElement(\"p\",{className:isZeroQuantity?\"quantity none-left\":\"quantity\"},product.quantity,\" left in stock\"),editable?/*#__PURE__*/React.createElement(EditProductForm,{product:product,onToggleEdit:handleToggleEdit,onUpdateProduct:updateProduct,editable:editable}):/*#__PURE__*/React.createElement(\"div\",{className:\"actions product-actions\"},/*#__PURE__*/React.createElement(\"a\",{className:isZeroQuantity?\"button add-to-cart disabled\":\"button add-to-cart\",onClick:function onClick(){return handleAddToCart(product);}},\"Add to Cart\"),/*#__PURE__*/React.createElement(\"a\",{className:\"button edit\",onClick:handleToggleEdit},\"Edit\")),/*#__PURE__*/React.createElement(\"a\",{className:\"delete-button\",onClick:function onClick(){return deleteProduct(product._id);}},/*#__PURE__*/React.createElement(\"span\",null,\"X\"))));};export default EditableProduct;","map":{"version":3,"sources":["/home/srdjan/Desktop/2105/shopping_cart_solution/client/src/components/EditableProduct.jsx"],"names":["React","useState","useDispatch","useSelector","updateProductAction","deleteProductAction","addToCartAction","EditProductForm","EditableProduct","props","editable","setEditable","product","isZeroQuantity","quantity","loading","state","dispatch","deleteProduct","id","updateProduct","callback","handleAddToCart","_id","handleToggleEdit","title","price"],"mappings":"8KAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OACEC,mBADF,CAEEC,mBAFF,CAGEC,eAHF,KAIO,2BAJP,CAKA,MAAOC,CAAAA,eAAP,KAA4B,mBAA5B,CAEA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,KAAD,CAAW,eACDR,QAAQ,CAAC,KAAD,CADP,wCAC1BS,QAD0B,eAChBC,WADgB,kBAEzBC,CAAAA,OAFyB,CAEbH,KAFa,CAEzBG,OAFyB,CAGjC,GAAMC,CAAAA,cAAc,CAAGD,OAAO,CAACE,QAAR,GAAqB,CAA5C,CAEA,GAAMC,CAAAA,OAAO,CAAGZ,WAAW,CAAC,SAACa,KAAD,QAAWA,CAAAA,KAAK,CAACD,OAAjB,EAAD,CAA3B,CAEA,GAAME,CAAAA,QAAQ,CAAGf,WAAW,EAA5B,CAEA,GAAMgB,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,EAAD,CAAQ,CAC5BF,QAAQ,CAACZ,mBAAmB,CAACc,EAAD,CAApB,CAAR,CACD,CAFD,CAIA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACR,OAAD,CAAUO,EAAV,CAAcE,QAAd,CAA2B,CAC/CJ,QAAQ,CAACb,mBAAmB,CAACQ,OAAD,CAAUO,EAAV,CAAcE,QAAd,CAApB,CAAR,CACD,CAFD,CAIA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACV,OAAD,CAAa,CACnC,GAAIA,OAAO,CAACE,QAAR,GAAqB,CAArB,EAA0BC,OAA9B,CAAuC,OACvCE,QAAQ,CACNX,eAAe,CACb,CACEQ,QAAQ,CAAEF,OAAO,CAACE,QAAR,CAAmB,CAD/B,CADa,CAIbF,OAAO,CAACW,GAJK,CADT,CAAR,CAQD,CAVD,CAYA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,EAAM,CAC7Bb,WAAW,CAAC,CAACD,QAAF,CAAX,CACD,CAFD,CAGA,mBACE,2BAAK,SAAS,CAAC,SAAf,eACE,2BAAK,SAAS,CAAC,iBAAf,eACE,8BAAKE,OAAO,CAACa,KAAb,CADF,cAEE,yBAAG,SAAS,CAAC,OAAb,MAAuBb,OAAO,CAACc,KAA/B,CAFF,cAGE,yBAAG,SAAS,CAAEb,cAAc,CAAG,oBAAH,CAA0B,UAAtD,EACGD,OAAO,CAACE,QADX,kBAHF,CAMGJ,QAAQ,cACP,oBAAC,eAAD,EACE,OAAO,CAAEE,OADX,CAEE,YAAY,CAAEY,gBAFhB,CAGE,eAAe,CAAEJ,aAHnB,CAIE,QAAQ,CAAEV,QAJZ,EADO,cAQP,2BAAK,SAAS,CAAC,yBAAf,eACE,yBACE,SAAS,CACPG,cAAc,CACV,6BADU,CAEV,oBAJR,CAME,OAAO,CAAE,yBAAMS,CAAAA,eAAe,CAACV,OAAD,CAArB,EANX,gBADF,cAWE,yBAAG,SAAS,CAAC,aAAb,CAA2B,OAAO,CAAEY,gBAApC,SAXF,CAdJ,cA+BE,yBAAG,SAAS,CAAC,eAAb,CAA6B,OAAO,CAAE,yBAAMN,CAAAA,aAAa,CAACN,OAAO,CAACW,GAAT,CAAnB,EAAtC,eACE,oCADF,CA/BF,CADF,CADF,CAuCD,CAvED,CAyEA,cAAef,CAAAA,eAAf","sourcesContent":["import React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  updateProductAction,\n  deleteProductAction,\n  addToCartAction,\n} from \"../actions/productActions\";\nimport EditProductForm from \"./EditProductForm\";\n\nconst EditableProduct = (props) => {\n  const [editable, setEditable] = useState(false);\n  const { product } = props;\n  const isZeroQuantity = product.quantity === 0;\n\n  const loading = useSelector((state) => state.loading);\n\n  const dispatch = useDispatch();\n\n  const deleteProduct = (id) => {\n    dispatch(deleteProductAction(id));\n  };\n\n  const updateProduct = (product, id, callback) => {\n    dispatch(updateProductAction(product, id, callback));\n  };\n\n  const handleAddToCart = (product) => {\n    if (product.quantity === 0 || loading) return;\n    dispatch(\n      addToCartAction(\n        {\n          quantity: product.quantity - 1,\n        },\n        product._id\n      )\n    );\n  };\n\n  const handleToggleEdit = () => {\n    setEditable(!editable);\n  };\n  return (\n    <div className=\"product\">\n      <div className=\"product-details\">\n        <h3>{product.title}</h3>\n        <p className=\"price\">${product.price}</p>\n        <p className={isZeroQuantity ? \"quantity none-left\" : \"quantity\"}>\n          {product.quantity} left in stock\n        </p>\n        {editable ? (\n          <EditProductForm\n            product={product}\n            onToggleEdit={handleToggleEdit}\n            onUpdateProduct={updateProduct}\n            editable={editable}\n          />\n        ) : (\n          <div className=\"actions product-actions\">\n            <a\n              className={\n                isZeroQuantity\n                  ? \"button add-to-cart disabled\"\n                  : \"button add-to-cart\"\n              }\n              onClick={() => handleAddToCart(product)}\n            >\n              Add to Cart\n            </a>\n            <a className=\"button edit\" onClick={handleToggleEdit}>\n              Edit\n            </a>\n          </div>\n        )}\n\n        <a className=\"delete-button\" onClick={() => deleteProduct(product._id)}>\n          <span>X</span>\n        </a>\n      </div>\n    </div>\n  );\n};\n\nexport default EditableProduct;\n"]},"metadata":{},"sourceType":"module"}