{"ast":null,"code":"export const cart = (state = [], action) => {\n  switch (action.type) {\n    case \"ADDED_TO_CART\":\n      const someInCart = state.some(item => item._id === action.item._id);\n      let updatedCart;\n\n      while (action.item.quantity > 0) {\n        if (someInCart) {\n          updatedCart = state.map(product => {\n            if (product._id === action.item._id) {\n              return Object.assign({}, product, {\n                quantity: product.quantity + 1\n              });\n            } else {\n              return product;\n            }\n          });\n        } else {\n          updatedCart = state.concat(Object.assign({}, action.item, {\n            quantity: 1\n          }));\n        }\n\n        return updatedCart;\n      }\n\n      return state;\n\n    case \"PRODUCT_DELETED\":\n      return state.filter(prod => prod._id !== action.payload);\n\n    case \"PRODUCT_UPDATED\":\n      return state.map(cartItem => {\n        if (cartItem.productId === action.payload._id) {\n          let updatedProduct = {\n            title: action.payload.title || cartItem.title,\n            price: action.payload.price === undefined ? cartItem.price : action.payload.price\n          };\n          return Object.assign({}, cartItem, updatedProduct);\n        } else {\n          return cartItem;\n        }\n      });\n\n    case \"CART_ITEMS_RECEIVED\":\n      return action.payload;\n\n    case \"CHECKOUT\":\n      return [];\n\n    default:\n      return state;\n  }\n};","map":{"version":3,"sources":["/home/srdjan/Desktop/Practice_Capstone/shopping_cart_solution/client/src/lib/reducers/cart.js"],"names":["cart","state","action","type","someInCart","some","item","_id","updatedCart","quantity","map","product","Object","assign","concat","filter","prod","payload","cartItem","productId","updatedProduct","title","price","undefined"],"mappings":"AAAA,OAAO,MAAMA,IAAI,GAAG,CAACC,KAAK,GAAG,EAAT,EAAaC,MAAb,KAAwB;AAC1C,UAAQA,MAAM,CAACC,IAAf;AACE,SAAK,eAAL;AACE,YAAMC,UAAU,GAAGH,KAAK,CAACI,IAAN,CAAYC,IAAD,IAAUA,IAAI,CAACC,GAAL,KAAaL,MAAM,CAACI,IAAP,CAAYC,GAA9C,CAAnB;AACA,UAAIC,WAAJ;;AAEA,aAAON,MAAM,CAACI,IAAP,CAAYG,QAAZ,GAAuB,CAA9B,EAAiC;AAC/B,YAAIL,UAAJ,EAAgB;AACdI,UAAAA,WAAW,GAAGP,KAAK,CAACS,GAAN,CAAWC,OAAD,IAAa;AACnC,gBAAIA,OAAO,CAACJ,GAAR,KAAgBL,MAAM,CAACI,IAAP,CAAYC,GAAhC,EAAqC;AACnC,qBAAOK,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBF,OAAlB,EAA2B;AAChCF,gBAAAA,QAAQ,EAAEE,OAAO,CAACF,QAAR,GAAmB;AADG,eAA3B,CAAP;AAGD,aAJD,MAIO;AACL,qBAAOE,OAAP;AACD;AACF,WARa,CAAd;AASD,SAVD,MAUO;AACLH,UAAAA,WAAW,GAAGP,KAAK,CAACa,MAAN,CACZF,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBX,MAAM,CAACI,IAAzB,EAA+B;AAAEG,YAAAA,QAAQ,EAAE;AAAZ,WAA/B,CADY,CAAd;AAGD;;AACD,eAAOD,WAAP;AACD;;AACD,aAAOP,KAAP;;AACF,SAAK,iBAAL;AACE,aAAOA,KAAK,CAACc,MAAN,CAAcC,IAAD,IAAUA,IAAI,CAACT,GAAL,KAAaL,MAAM,CAACe,OAA3C,CAAP;;AACF,SAAK,iBAAL;AACE,aAAOhB,KAAK,CAACS,GAAN,CAAWQ,QAAD,IAAc;AAC7B,YAAIA,QAAQ,CAACC,SAAT,KAAuBjB,MAAM,CAACe,OAAP,CAAeV,GAA1C,EAA+C;AAC7C,cAAIa,cAAc,GAAG;AACnBC,YAAAA,KAAK,EAAEnB,MAAM,CAACe,OAAP,CAAeI,KAAf,IAAwBH,QAAQ,CAACG,KADrB;AAEnBC,YAAAA,KAAK,EACHpB,MAAM,CAACe,OAAP,CAAeK,KAAf,KAAyBC,SAAzB,GACIL,QAAQ,CAACI,KADb,GAEIpB,MAAM,CAACe,OAAP,CAAeK;AALF,WAArB;AAOA,iBAAOV,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBK,QAAlB,EAA4BE,cAA5B,CAAP;AACD,SATD,MASO;AACL,iBAAOF,QAAP;AACD;AACF,OAbM,CAAP;;AAcF,SAAK,qBAAL;AACE,aAAOhB,MAAM,CAACe,OAAd;;AACF,SAAK,UAAL;AACE,aAAO,EAAP;;AACF;AACE,aAAOhB,KAAP;AA9CJ;AAgDD,CAjDM","sourcesContent":["export const cart = (state = [], action) => {\n  switch (action.type) {\n    case \"ADDED_TO_CART\":\n      const someInCart = state.some((item) => item._id === action.item._id);\n      let updatedCart;\n\n      while (action.item.quantity > 0) {\n        if (someInCart) {\n          updatedCart = state.map((product) => {\n            if (product._id === action.item._id) {\n              return Object.assign({}, product, {\n                quantity: product.quantity + 1,\n              });\n            } else {\n              return product;\n            }\n          });\n        } else {\n          updatedCart = state.concat(\n            Object.assign({}, action.item, { quantity: 1 })\n          );\n        }\n        return updatedCart;\n      }\n      return state;\n    case \"PRODUCT_DELETED\":\n      return state.filter((prod) => prod._id !== action.payload);\n    case \"PRODUCT_UPDATED\":\n      return state.map((cartItem) => {\n        if (cartItem.productId === action.payload._id) {\n          let updatedProduct = {\n            title: action.payload.title || cartItem.title,\n            price:\n              action.payload.price === undefined\n                ? cartItem.price\n                : action.payload.price,\n          };\n          return Object.assign({}, cartItem, updatedProduct);\n        } else {\n          return cartItem;\n        }\n      });\n    case \"CART_ITEMS_RECEIVED\":\n      return action.payload;\n    case \"CHECKOUT\":\n      return [];\n    default:\n      return state;\n  }\n};\n"]},"metadata":{},"sourceType":"module"}